# Engineering a Compiler notes

notes：看的是中文译本

# *CH1 编译概观*


**编译器 vs 解释器**


编译器一次性的，把一个某种语言编写的程序作为输入，产生一个等价的程序作为输出，一些编译器产生的等价程序是面向人类的程序设计语言，这种程序还需要进一步编译成为计算机所识别的机器码才能运行

<img src="http://yuml.me/diagram/scruffy/class/[源程序]-[编译器]->[目标程序]" >

解释器一行一行读取代码，解释并运行（编译不包括运行）

<img src="http://yuml.me/diagram/scruffy/class/[源程序]-[解释器]->[结果]" >


**编译器的基本准则**

1. 编译器必须保持被编译程序的语义
2. 编译器必须以某种可察觉的方式改进输入程序

**编译器结构**

两阶段编译器结构，前端专注于理解语言程序，后端专注于将程序映射到目标机

<img src="http://yuml.me/diagram/scruffy/class/[源程序]-[前端]IR-[后端]-[目标程序]" >

输出目标程序前，编译器可以对IR的形式进行多次迭代，生成更好的IR代码，因此引出三阶段编译器结构

<img src="http://yuml.me/diagram/scruffy/class/[源程序]-[前端]IR1-[优化器]IR2-[后端]->[目标程序]" >


前端：

词法分析器：将字符构成的串转换为单词构成的流
语法分析器：判断输入流是否是源语言的一个句子
类型检查：检查输入程序中对名字使用在类型方面是否一致

优化器：分析，转化

后端：

指令选择：将IR重写为目标机操作

寄存器分配：目标寄存器数目有限，要最小化寄存器使用


指令调度：代码重排，最小化等待操作数浪费的周期数，确保新指令序列产生的结果与原来的指令序列相同




# *CH2 词法分析器*

操作输入的每一个字符，读取字符流，产生单词流。

Algol及其衍生语言定义：标识符为一个字母字符后接零个或多个字母/数字字符，标识符结束于第一个非字母/数字字符，
有效单词集合是由规则决定的，不用在字典中枚举

**识别单词**

**RE**

**RE->LEX**