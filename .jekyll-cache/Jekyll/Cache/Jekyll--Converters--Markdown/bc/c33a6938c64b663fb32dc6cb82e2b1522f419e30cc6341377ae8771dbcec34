I"Á<h1 id="å…‰çº¿-ç›¸æœº-èƒŒæ™¯">å…‰çº¿ ç›¸æœº èƒŒæ™¯</h1>

<hr />

<h3 id="å…‰çº¿ç±»rayh">å…‰çº¿ç±»ray.h</h3>

<p>æˆ‘ä»¬ä¹ æƒ¯ç”¨ç›´çº¿æ¥è¡¨ç¤ºå…‰çº¿</p>

<p>ç›´çº¿æ–¹ç¨‹æ˜¯p(t)=A+tâˆ—Bï¼Œå…¶ä¸­ï¼ŒAï¼ŒBéƒ½æ˜¯vec3ç±»å‹ï¼ŒAæ˜¯å…‰çº¿çš„èµ·ç‚¹ï¼ŒBæ˜¯å…‰çº¿çš„æ–¹å‘ï¼Œtä¸ºä¸€å®æ•°ï¼ˆä»£ç ä¸­ç”¨æµ®ç‚¹æ•°è¡¨ç¤ºï¼‰ï¼Œp(t)å¯¹åº”tä¸åŒå–å€¼æ—¶ç›´çº¿ä¸Šçš„ç‚¹</p>

<p><img src="https://raytracing.github.io/images/fig-1-04-1.jpg" alt="" /></p>

<p>rayç±»çš„ä»£ç å¦‚ä¸‹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#ifndef RAYH
#define RAYH
#include "vec3.h"

class ray
{
    public:
        ray() {}
        ray(const vec3&amp; a, const vec3&amp; b) { A = a; B = b; }
        vec3 origin() const       { return A; }
        vec3 direction() const    { return B; }
        vec3 point_at_parameter(float t) const { return A + t*B; }

        vec3 A;
        vec3 B;
};

#endif
</code></pre></div></div>

<hr />

<h3 id="colorå‡½æ•°">colorå‡½æ•°</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vec3 color(const ray&amp; r) {
    vec3 unit_direction = unit_vector(r.direction());
    float t = 0.5*(unit_direction.y() + 1.0);
    return (1.0-t)*vec3(1.0, 1.0, 1.0) + t*vec3(0.5, 0.7, 1.0);
}
</code></pre></div></div>

<p>colorå‡½æ•°æ¥æ”¶ä¸€ä¸ªrayç±»å‹å˜é‡rï¼Œå¹¶å°†rçš„æ–¹å‘å‘é‡å•ä½åŒ–ï¼Œtæ˜¯ä¸€ä¸ª(0,1)ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œå…‰çº¿yåˆ†é‡è¶Šå°ï¼Œtè¶Šå°ï¼Œåä¹‹ï¼Œtè¶Šå¤§
å‡½æ•°è¿”å›(1,1,1)ï¼Œ(0.5,0.7,1.0)é¢œè‰²çš„æ’å€¼ä½œä¸ºèƒŒæ™¯é¢œè‰²</p>

<hr />

<h3 id="åæ ‡ç³»ç»Ÿ">åæ ‡ç³»ç»Ÿ</h3>

<p>ä½¿ç”¨å³æ‰‹åæ ‡ç³»ï¼Œæˆ‘ä»¬å…‰çº¿çš„èµ·ç‚¹è®¾ä¸º(0,0,0)ï¼Œå±å¹•çš„åä¸‹è§’ä¸º(-2,-1,-1)ï¼Œå±å¹•çš„å®½ï¼Œé«˜åˆ†åˆ«ä¸º4ï¼Œ2</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    vec3 lower_left_corner(-2.0, -1.0, -1.0);
    vec3 horizontal(4.0, 0.0, 0.0);
    vec3 vertical(0.0, 2.0, 0.0);
    vec3 origin(0.0, 0.0, 0.0);
</code></pre></div></div>

<p>å¦‚ä¸‹å›¾æ‰€ç¤º</p>

<p><img src="https://raytracing.github.io/images/fig-1-04-2.jpg" alt="" /></p>

<hr />

<p>ä¿®æ”¹åçš„mainå‡½æ•°å¦‚ä¸‹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include "svpng.inc"
#include "ray.h"

vec3 color(const ray&amp; r) {
    vec3 unit_direction = unit_vector(r.direction());
    float t = 0.5*(unit_direction.y() + 1.0);
    return (1.0-t)*vec3(1.0, 1.0, 1.0) + t*vec3(0.5, 0.7, 1.0);
}

int main() {

    int nx=600,ny=300;
    unsigned char rgb[nx * ny * 3], *p = rgb;
    FILE *fp = fopen("test.png", "wb");

    vec3 lower_left_corner(-2.0, -1.0, -1.0);
    vec3 horizontal(4.0, 0.0, 0.0);
    vec3 vertical(0.0, 2.0, 0.0);
    vec3 origin(0.0, 0.0, 0.0);

    for (int j = ny-1; j &gt;= 0; j--)
        for (int i = 0; i &lt; nx; i++) {
            float u = float(i) / float(nx);
            float v = float(j) / float(ny);
            ray r(origin, lower_left_corner + u*horizontal + v*vertical);
            vec3 col = color(r);

            *p++ = int(255.99*col[0]);    /* R */
            *p++ = int(255.99*col[1]);    /* G */
            *p++ = int(255.99*col[2]);    /* B */
        }
    svpng(fp, nx, ny, rgb, 0);
    fclose(fp); 
    return 0;
}
</code></pre></div></div>

<p>æ¸²æŸ“å‡ºçš„å›¾åƒå¦‚ä¸‹</p>

<p><img src="https://pic.downk.cc/item/5e2174ab2fb38b8c3c384130.png" alt="" /></p>

<p>åœ¨ç«–ç›´æ–¹å‘ï¼Œå›¾åƒçš„é¢œè‰²ç”±ç™½è‰²(0,0,0)æ¸å˜åˆ°è“è‰²(0.5,0.8,1.0)ï¼Œåœ¨æ°´å¹³æ–¹å‘ï¼Œç”±äºå…‰çº¿å‘é‡çš„yåˆ†é‡ç›¸åŒï¼Œé¢œè‰²ä¸å˜åŒ–</p>
:ET