I"£<!-- å›¾å½¢å­¦ä¸­çš„å‘é‡ä¸€èˆ¬æ˜¯4ç»´çš„ï¼ŒçŸ©é˜µä¸€èˆ¬æ˜¯4Ã—4çš„ï¼Œæˆ‘ä»¬å®šä¹‰```Vector4f```ï¼Œ```Matrix4f```æ¥è¡¨ç¤ºè¿™ä¸¤ç§æ•°æ®ç»“æ„ -->

<h1 id="çŸ©é˜µå˜æ¢">çŸ©é˜µå˜æ¢</h1>

<h2 id="å¹³ç§»">å¹³ç§»</h2>

<p>å¹³ç§»æ“ä½œå¯ä»¥æŠŠç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹<script type="math/tex">p(p_x,p_y,p_z,1)</script>æ²¿<script type="math/tex">t(t_x,t_y,t_z)</script>æ–¹å‘ç§»åŠ¨ä¸€æ®µè·ç¦»ï¼Œéœ€å°†ç‚¹på·¦ä¹˜å˜æ¢çŸ©é˜µ<script type="math/tex">T(t)</script>,
<script type="math/tex">% <![CDATA[
\\T(t)=\begin{bmatrix}1 & 0 & 0 & t_x\\0&1&0&t_y\\0&0&1&t_z\\0&0&0&1\\\end{bmatrix} %]]></script></p>

<p>å¹³ç§»åç‚¹pçš„åæ ‡ä¸º<script type="math/tex">p'=(p_x+t_x, p_y +t_y, p_z +t_z, 1)</script></p>

<hr />

<h2 id="æ—‹è½¬">æ—‹è½¬</h2>

<h3 id="äºŒç»´æ—‹è½¬">äºŒç»´æ—‹è½¬</h3>

<h4 id="ç»•åŸç‚¹çš„äºŒç»´æ—‹è½¬">ç»•åŸç‚¹çš„äºŒç»´æ—‹è½¬</h4>

<p><img src="D:\onedrive\Program\blog draft\figures\r2d.png" alt="" />
æˆ‘ä»¬è¦å°†pç»•æ—‹è½¬<script type="math/tex">\phi</script>åˆ°ç‚¹<script type="math/tex">q</script>,å³éœ€è¦ä¸€ä¸ªçŸ©é˜µRï¼Œä½¿å¾—</p>

<p><script type="math/tex">q=R*p \\
\begin{bmatrix}rcos(\theta+\phi)\\ 
rsin(\theta+\phi)\end{bmatrix}=R\begin{bmatrix}rcos\theta\\ 
rsin\theta\end{bmatrix}\\</script>
<script type="math/tex">\begin{bmatrix}rcos\theta cos\phi-rsin\theta sin\phi\\
rsin\theta cos\phi+rcos\theta sin\phi\end{bmatrix}=R\begin{bmatrix} rcos\theta\\ 
rsin\theta\end{bmatrix}\\</script>
è§£å¾—
<script type="math/tex">% <![CDATA[
R=\begin{bmatrix}
cos\phi & -sin\phi\\ 
sin\phi& cos\phi
\end{bmatrix} %]]></script></p>

<h4 id="ç»•ä»»æ„ç‚¹çš„äºŒç»´æ—‹è½¬">ç»•ä»»æ„ç‚¹çš„äºŒç»´æ—‹è½¬</h4>

<ol>
  <li>å°†æ—‹è½¬ç‚¹xç§»åŠ¨åˆ°åŸç‚¹</li>
  <li>ç»•åŸç‚¹è¿›è¡ŒäºŒç»´æ—‹è½¬</li>
  <li>å°†xç§»åŠ¨å›åŸæ¥çš„ä½ç½®</li>
</ol>

<h3 id="ä¸‰ç»´æ—‹è½¬">ä¸‰ç»´æ—‹è½¬</h3>

<p>ç©ºé—´ç›´è§’åæ ‡ç³»é€šå¸¸æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼Œå·¦æ‰‹åæ ‡ç³»å’Œå³æ‰‹åæ ‡ç³»ï¼Œä¹Ÿæ˜¯DirectXå’ŒOpenGLä¸­ä¸åŒçš„åœ°æ–¹ï¼Œæœ¬æ–‡ä¸­çš„åæ ‡ç³»å‡ä»¥å³æ‰‹åæ ‡ç³»ä¸ºä¾‹</p>

<h4 id="ç»•è½´çš„æ—‹è½¬">ç»•è½´çš„æ—‹è½¬</h4>

<ul>
  <li>ç»•zè½´æ—‹è½¬</li>
</ul>

<p><img src="https://pic.downk.cc/item/5f03669014195aa5942e4945.jpg" height="200" width="200" /></p>

<p><script type="math/tex">q=R_z*p\\</script>
<script type="math/tex">\begin{bmatrix}
rcos(\theta+\phi)\\ 
rsin(\theta+\phi)\\ 0
\end{bmatrix}
=R_z
\begin{bmatrix}rcos\theta\\ 
rsin\theta\\ 0\end{bmatrix}\\</script>
<script type="math/tex">\begin{bmatrix}
rcos\theta cos\phi-rsin\theta sin\phi\\
rsin\theta cos\phi+rcos\theta sin\phi\\0\\
\end{bmatrix}
=R_z
\begin{bmatrix} rcos\theta\\
rsin\theta\\0 \\
\end{bmatrix}\\</script>
è§£å¾—
<script type="math/tex">% <![CDATA[
R_z=\begin{bmatrix}
cos\phi & -sin\phi&0\\ 
sin\phi& cos\phi&0\\
0&0&1
\end{bmatrix} %]]></script></p>

<ul>
  <li>ç»•xè½´æ—‹è½¬</li>
</ul>

<p><img src="https://pic.downk.cc/item/5f03669014195aa5942e493b.jpg" height="200" width="200" /></p>

<p><script type="math/tex">q=R_x*p\\</script>
<script type="math/tex">\begin{bmatrix}
0\\
rcos(\theta+\phi)\\ 
rsin(\theta+\phi)
\end{bmatrix}
=M
\begin{bmatrix}
0\\
rcos\theta\\ 
rsin\theta
\end{bmatrix}\\</script>
<script type="math/tex">\begin{bmatrix}
0\\rcos\theta cos\phi-rsin\theta sin\phi\\
rsin\theta cos\phi+rcos\theta sin\phi
\end{bmatrix}
=M\begin{bmatrix} 0\\rcos\theta\\ 
rsin\theta\end{bmatrix}</script></p>

<p>è§£å¾—
<script type="math/tex">% <![CDATA[
R_x=\begin{bmatrix}
1&0&0\\
0&cos\phi&-sin\phi\\
0&sin\phi&cos\phi
\end{bmatrix} %]]></script></p>

<ul>
  <li>ç»•yè½´æ—‹è½¬</li>
</ul>

<p><img src="https://pic.downk.cc/item/5f03669014195aa5942e4940.jpg" height="200" width="200" /></p>

<p><script type="math/tex">q=R_y*p \\</script>
<script type="math/tex">\begin{bmatrix}
rsin(\theta+\phi)\\0\\rcos(\theta+\phi)
\end{bmatrix}
=R_y
\begin{bmatrix}
rsin\theta\\0\\rcos\theta
\end{bmatrix}\\</script>
<script type="math/tex">\begin{bmatrix}
rsin\theta cos\phi+rcos\theta sin\phi\\0\\rcos\theta cos\phi-rsin\theta sin\phi
\end{bmatrix}
=R_y
\begin{bmatrix}
rsin\theta\\0\\rcos\theta
\end{bmatrix}</script></p>

<p>è§£å¾—
<script type="math/tex">% <![CDATA[
R_y=\begin{bmatrix}
cos\phi&0&sin\phi\\
0&1&0\\
-sin\phi&0&cos\phi
\end{bmatrix} %]]></script></p>

<p>å°†ä¸Šè¿°ä¸‰ä¸ªæ—‹è½¬çŸ©é˜µ<script type="math/tex">R_x,R_y,R_z</script>ç»„åˆèµ·æ¥
<script type="math/tex">R_{x,y,z}(\alpha,\beta,\gamma)=R_x(\alpha)R_y(\beta)R_z(\gamma)</script></p>

<p>è¿™æ ·çš„æ—‹è½¬ä¹Ÿå«Euleræ—‹è½¬</p>

<h4 id="æ²¿ä»»æ„è½´çš„æ—‹è½¬rodrigues-rotation-formula">æ²¿ä»»æ„è½´çš„æ—‹è½¬/Rodriguesâ€™ Rotation Formula</h4>

<p>å’ŒäºŒç»´ç»•ä»»æ„ç‚¹æ—‹è½¬ç±»ä¼¼ï¼Œæˆ‘ä»¬å°†æ—‹è½¬è½´<script type="math/tex">n</script>æ—‹è½¬è‡³ä¸åæ ‡è½´é‡åˆï¼ˆä»¥<script type="math/tex">x</script>è½´ä¸ºä¾‹ï¼‰ï¼Œç„¶åç»•<script type="math/tex">x</script>è½´æ—‹è½¬<script type="math/tex">{\alpha}</script>ï¼Œå†æ—‹è½¬è½´æ—‹è½¬å›åŸæ¥çš„ä½ç½®</p>

<p>æ•´ä¸ªæµç¨‹å¦‚ä¸‹</p>

<p><script type="math/tex">q=M^TR_x(\alpha)Mp\\</script>
<script type="math/tex">cos\theta=\frac{z}{\sqrt{y^2+z^2}}\\
sin\theta=\frac{y}{\sqrt{y^2+z^2}}\\</script>
<script type="math/tex">% <![CDATA[
R_x(\theta)=\begin{bmatrix}
1&0&0&0\\
0&\frac{z}{\sqrt{y^2+z^2}}&-\frac{y}{\sqrt{y^2+z^2}}&0\\
0&\frac{y}{\sqrt{y^2+z^2}}&\frac{z}{\sqrt{y^2+z^2}}&0\\
0&0&0&1
\end{bmatrix}\\ %]]></script>
<script type="math/tex">cos\phi=\frac{x}{\sqrt{x^2+y^2+z^2}} \\ 
sin\phi=\frac{\sqrt{y^2+z^2}}{\sqrt{x^2+y^2+z^2}}\\</script>
<script type="math/tex">% <![CDATA[
R_y(\phi)=\begin{bmatrix}
\frac{x}{\sqrt{x^2+y^2+z^2}}&0&\frac{\sqrt{y^2+z^2}}{\sqrt{x^2+y^2+z^2}}&0\\
0&1&0&0\\
-\frac{\sqrt{y^2+z^2}}{\sqrt{x^2+y^2+z^2}}&0&\frac{x}{\sqrt{x^2+y^2+z^2}}&0\\
0&0&0&1
\end{bmatrix}\\ %]]></script>
<script type="math/tex">R=R_x(-\theta)R_y(-\phi)R_x(\alpha)R_y(\phi)R_x(\theta)</script></p>

<p>æœ€ç»ˆæ—‹è½¬çŸ©é˜µ
<script type="math/tex">% <![CDATA[
R=\begin{bmatrix}
  cos\alpha+(1-cos\alpha)n_x^2&(1-cos\alpha)n_xn_y-n_zsin\alpha&(1-cos\alpha)n_xn_y+n_ysin\alpha\\ 
(1-cos\alpha)n_xn_y+n_zsin\alpha&cos\alpha+(1-cos\alpha)n_y^2&(1-cos\alpha)n_yn_z-nx_sin\alpha\\
(1-cos\alpha)n_xn_z-n_ysin\alpha&(1-cos\alpha)n_yn_z+n_xsin\alpha&cos\alpha+(1-cos\alpha)n_z^2
\end{bmatrix}\\
=cos(\alpha)I+(1-cos\alpha)nn^T+sin\alpha %]]></script></p>

<!-- #### å››å…ƒæ•°æ—‹è½¬ -->

<hr />

<h3 id="ç¼©æ”¾">ç¼©æ”¾</h3>

<p>ç¼©æ”¾çŸ©é˜µçš„å½¢å¼å¦‚ä¸‹ï¼Œå¯ä»¥å°†æŸä¸ªç‚¹æ²¿<script type="math/tex">x,y,z</script>è½´åˆ†åˆ«ç¼©æ”¾<script type="math/tex">s_x,s_y,s_z</script>å€</p>

<script type="math/tex; mode=display">% <![CDATA[
S(s)=\begin{bmatrix}
  s_x & 0 & 0 & 0\\
  0&s_y&0&0\\
  0&0&s_z&0\\
  0&0&0&1\\
  \end{bmatrix} %]]></script>

<hr />

<p><strong>reference:</strong></p>

<p>ã€ŠReal-Time Rendering Fourth Editionã€‹
https://blog.csdn.net/qq_28773183/article/details/80083607</p>

<p>https://blog.csdn.net/csxiaoshui/article/details/65446125</p>

<p>https://www.cnblogs.com/wtyuan/p/12324495.html</p>

:ET