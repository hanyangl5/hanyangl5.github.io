I"(<h1 id="è½¯ä»¶å®è·µè¯¾ç¬¬ä¸€æ¬¡å°ä½œä¸šæ•°æ®é‡‡é›†">è½¯ä»¶å®è·µè¯¾ç¬¬ä¸€æ¬¡å°ä½œä¸šï¼šæ•°æ®é‡‡é›†</h1>

<p>#####å®éªŒè¦æ±‚</p>

<ol>
  <li>åŒå­¦èƒ½å¤Ÿè‡ªä¸»ç¼–å†™çˆ¬è™«ç¨‹åºï¼Œè®¿é—®å·²åˆ†é…é«˜æ ¡æœ¬ç§‘æ‹›ç”Ÿç½‘ç«™çš„å½•å–åˆ†æ•°ç›¸å…³é¡µé¢ï¼Œè¯»å–ç½‘ç«™ä¸Šçš„åˆ†æ•°æ–‡æœ¬ä¿¡æ¯æˆ–è€…ä¸‹è½½åŒ…å«åˆ†æ•°ä¿¡æ¯çš„å¯è§£ææ–‡ä»¶</li>
  <li>åŒå­¦èƒ½å¤Ÿæ ¹æ®ç½‘ç«™çš„é™æ€/åŠ¨æ€é¡µé¢ç»“æ„ï¼Œä»ç½‘ç«™æ–‡æœ¬æˆ–ä¸‹è½½æ–‡ä»¶ä¸­æå–å‡ºè¿‘ä¸‰å¹´æ•°æ®ä¸­çš„â€œå¹´ä»½â€ã€â€œçœä»½â€ã€â€œæ–‡ç†ç§‘â€ã€â€œä¸“ä¸šåç§°â€ã€â€œæœ€ä½åˆ†â€ç­‰ä¿¡æ¯</li>
  <li>åŒå­¦èƒ½å¤ŸæŒ‰è¦æ±‚å­˜å‚¨çˆ¬è™«æå–çš„ä¿¡æ¯ï¼Œå°†çˆ¬å–çš„ä¿¡æ¯å­˜ä¸ºâ€œå­¦å·å§“å-é«˜æ ¡.csvâ€</li>
</ol>

<p>ç¬”è€…è´Ÿè´£çš„å­¦æ ¡æ˜¯åˆè‚¥å·¥ä¸šå¤§å­¦ï¼Œæ‹›ç”Ÿç½‘ç«™çš„urlæ˜¯ http://bkzs.hfut.edu.cn/f/ajax_lnfs ï¼Œç½‘ç«™æ˜¯åŠ¨æ€ç½‘ç«™ï¼Œéœ€è¦å‘é€postè¯·æ±‚æ¥è·å–ä¿¡æ¯</p>

<p>F12æŸ¥çœ‹request url</p>

<p><img src="https://pic.downk.cc/item/5ebe2568c2a9a83be568ff69.png" alt="" /></p>

<p>éœ€è¦ä¼ é€’çš„å‚æ•°æœ‰çœä»½ï¼Œå¹´ä»½ï¼Œæ–‡ç†ç§‘ï¼Œæ ¡åŒºï¼Œæ‹›ç”Ÿæ‰¹æ¬¡</p>

<p><img src="https://pic.downk.cc/item/5ebe2579c2a9a83be569147f.png" alt="" /></p>

<p>æ„é€ çœä»½ï¼Œå¹´ä»½ï¼Œæ–‡ç†ç§‘ï¼Œæ ¡åŒºçš„åˆ—è¡¨</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>province_list = [
    "åŒ—äº¬", "å¤©æ´¥", "æ²³åŒ—", "å±±è¥¿", "å†…è’™å¤", "è¾½å®", "å‰æ—", "é»‘é¾™æ±Ÿ", "ä¸Šæµ·", "æ±Ÿè‹", "æµ™æ±Ÿ", "å®‰å¾½",
    "ç¦å»º", "æ±Ÿè¥¿", "å±±ä¸œ", "æ²³å—", "æ¹–åŒ—", "æ¹–å—", "å¹¿ä¸œ", "å¹¿è¥¿", "æµ·å—", "é‡åº†", "å››å·", "è´µå·",
    "äº‘å—", "è¥¿è—", "é™•è¥¿", "ç”˜è‚ƒ", "é’æµ·", "å®å¤", "æ–°ç–†", "å°æ¹¾", "é¦™æ¸¯", "æ¾³é—¨"]
year_list = ['2017', '2018', '2019']
catagory_list = ['æ–‡å²', 'ç†å·¥', 'ç»¼åˆæ”¹é©']
campus_list = ['åˆè‚¥æ ¡åŒº', 'å®£åŸæ ¡åŒº']
</code></pre></div></div>

<p>æ„é€ éœ€è¦postçš„form data</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>formdata = {
    'ssmc': province_list[j],
    'zsnf': year_list[i],
    'klmc': catagory_list[k],
    'campus': campus_list[l],
    'zslx': 'ç»Ÿæ‹›ä¸€æ‰¹'
}
</code></pre></div></div>

<p>ç”¨requestsåº“ä¸­requests.post()å‘æœåŠ¡å™¨å‘é€postè¯·æ±‚</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>response = requests.post(url, data=formdata)
</code></pre></div></div>
<p>è¿‡æ»¤æ— ç”¨çš„ä¿¡æ¯ï¼Œå¹¶å°†æ•°æ®æŒ‰ç›¸åº”æ ¼å¼å­˜å‚¨åœ¨score_df(type:dataframe)ä¸­</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if response.status_code == 200:
    # filter
    score = json.loads(response.text)[
        'data']['sszygradeList']
    if len(score) != 0:
        for x in score:
            score_df = score_df.append(
                [{
                    'College': 'åˆè‚¥å·¥ä¸šå¤§å­¦',
                    'Year': x['nf'],
                    'Province': x['ssmc'],
                    'Category': x['klmc'],
                    'Campus': x['campus'],
                    'Major': x['zymc'],
                    'Score': x['minScore'],
                    'Contributor': '09118320é²ç€šæ´‹'
                }], ignore_index=True)
</code></pre></div></div>
<p>å°†score_dfæ•°æ®å†™å…¥åˆ°csv</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>score_df.to_csv(path, encoding='utf-8-sig')
</code></pre></div></div>

<p>ç»“æœå¦‚ä¸‹</p>

<p><img src="https://pic.downk.cc/item/5ece4022c2a9a83be5a7d919.png" width="300" height="300" alt="å›¾ç‰‡åç§°" align="center" /></p>

<p><a href="https://github.com/v4vendeta/SEU-Backup/tree/python/crawler">source code</a></p>
:ET